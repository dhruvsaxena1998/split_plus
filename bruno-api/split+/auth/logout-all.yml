info:
  name: logout-all
  type: http
  seq: 4

http:
  method: POST
  url: "{{base_url}}/auth/logout-all"
  headers:
    - name: Authorization
      value: "Bearer {{access_token}}"
      enabled: true
  auth: none

settings:
  encodeUrl: true
  timeout: 0
  followRedirects: true
  maxRedirects: 5

tests:
  script: |-
    test("should return 200 OK", function() {
      expect(res.status).to.equal(200);
    });

    test("should have success message", function() {
      expect(res.body.data.message).to.equal("all sessions logged out successfully");
    });

    // Clear tokens from environment
    bru.setEnvVar("access_token", "");
    bru.setEnvVar("refresh_token", "");

docs: |
  # Logout All Sessions

  Logs out the user from all devices by invalidating all their active sessions.

  ## Headers
  - `Authorization`: Bearer token (access token)

  ## Response
  Returns success message:
  - `message`: "all sessions logged out successfully"

  ## Status Codes
  - `200 OK`: Successfully logged out from all sessions
  - `401 Unauthorized`: Invalid or missing access token
  - `500 Internal Server Error`: Server error during logout

  ## What Happens
  - All refresh tokens for this user are deleted from the sessions table
  - User is logged out from all devices/browsers
  - Current access token remains valid until it expires (not blacklisted)

  ## Usage
  Use this when:
  - User suspects unauthorized access
  - User wants to force logout from all devices
  - Security measure after password change

  ## Example Response
  ```json
  {
    "status": true,
    "data": {
      "message": "all sessions logged out successfully"
    }
  }
  ```

  ## Notes
  - Only requires access token (no refresh token needed)
  - Affects all sessions across all devices
  - User will need to login again on all devices
